# Configuration Layer Architecture

```
+---------------------------------------------------------------------------------------------------------------------+
|                                    Configuration Layer - Detailed View                                               |
+---------------------------------------------------------------------------------------------------------------------+
|                                                                                                                     |
|  +-------------------------+      +-------------------------+      +-------------------------+                       |
|  |    YAML Configuration   |      |   Environment Variables |      |    Secrets Management   |                       |
|  |                         |      |                         |      |                         |                       |
|  | +-----------------+     |      | +-----------------+     |      | +-----------------+     |                       |
|  | | Config Types    |     |      | | Env Categories  |     |      | | Secret Types    |     |                       |
|  | | - app-config.yaml|    |      | | - APP_ENV       |     |      | | - API Keys      |     |                       |
|  | | - agents.yaml   |     |      | | - LOG_LEVEL     |     |      | | - DB Credentials|     |                       |
|  | | - vector-db.yaml|     |      | | - SERVICE_URLS  |     |      | | - Certificates  |     |                       |
|  | | - medical-kb.yaml|    |      | | - RESOURCE_LIMITS|    |      | | - OAuth Tokens  |     |                       |
|  | +-----------------+     |      | +-----------------+     |      | +-----------------+     |                       |
|  +-------------------------+      +-------------------------+      +-------------------------+                       |
|              ^                                 ^                                 ^                                  |
|              |                                 |                                 |                                  |
|              v                                 v                                 v                                  |
|  +-------------------------+      +-------------------------+      +-------------------------+                       |
|  |  Configuration Manager  |      |   Config Validation     |      |   Config Distribution   |                       |
|  |                         |      |                         |      |                         |                       |
|  | +-----------------+     |      | +-----------------+     |      | +-----------------+     |                       |
|  | | Features        |     |      | | Validators      |     |      | | Methods         |     |                       |
|  | | - Loading       |     |      | | - Schema        |     |      | | - ConfigMaps    |     |                       |
|  | | - Merging       |     |      | | - Semantic      |     |      | | - Volumes       |     |                       |
|  | | - Overriding    |     |      | | - Cross-field   |     |      | | - API           |     |                       |
|  | | - Versioning    |     |      | | - HIPAA Rules   |     |      | | - Pub/Sub       |     |                       |
|  | +-----------------+     |      | +-----------------+     |      | +-----------------+     |                       |
|  +-------------------------+      +-------------------------+      +-------------------------+                       |
|              ^                                 ^                                 ^                                  |
|              |                                 |                                 |                                  |
|              v                                 v                                 v                                  |
|  +-------------------------+      +-------------------------+      +-------------------------+                       |
|  |   Configuration Store   |      |    Config Templates     |      |    Config Versioning    |                       |
|  |                         |      |                         |      |                         |                       |
|  | +-----------------+     |      | +-----------------+     |      | +-----------------+     |                       |
|  | | Storage Types   |     |      | | Template Types  |     |      | | Version Control |     |                       |
|  | | - Cloud SQL     |     |      | | - Base Templates|     |      | | - Git Integration|    |                       |
|  | | - Firestore     |     |      | | - Env Specific  |     |      | | - History       |     |                       |
|  | | - Cloud Storage |     |      | | - Service Specific|   |      | | - Rollback      |     |                       |
|  | | - Kubernetes    |     |      | | - Medical Domain|     |      | | - Audit         |     |                       |
|  | +-----------------+     |      | +-----------------+     |      | +-----------------+     |                       |
|  +-------------------------+      +-------------------------+      +-------------------------+                       |
|              ^                                 ^                                 ^                                  |
|              |                                 |                                 |                                  |
|              v                                 v                                 v                                  |
|  +-------------------------+      +-------------------------+      +-------------------------+                       |
|  |   Configuration API     |      |    Config UI            |      |    Config Automation    |                       |
|  |                         |      |                         |      |                         |                       |
|  | +-----------------+     |      | +-----------------+     |      | +-----------------+     |                       |
|  | | Endpoints       |     |      | | UI Features     |     |      | | Automation      |     |                       |
|  | | - Get           |     |      | | - Editor        |     |      | | - CI/CD         |     |                       |
|  | | - Set           |     |      | | - Validation    |     |      | | - GitOps        |     |                       |
|  | | - Update        |     |      | | - History       |     |      | | - IaC           |     |                       |
|  | | - Validate      |     |      | | - Comparison    |     |      | | - Terraform     |     |                       |
|  | +-----------------+     |      | +-----------------+     |      | +-----------------+     |                       |
|  +-------------------------+      +-------------------------+      +-------------------------+                       |
|                                                                                                                     |
+---------------------------------------------------------------------------------------------------------------------+
```
